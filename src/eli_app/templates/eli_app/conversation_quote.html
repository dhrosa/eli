{% load json %}

<article class="conversation">
  <blockquote>
    {{ object.query }}
    <footer>
      <cite>- {{ object.audience_name }} @ {{ object.timestamp }} ({{ object.timestamp|timesince}} ago)</td></cite>
    </footer>
  </blockquote>
  {% if object.ok %}
  <blockquote>
    {{ object.response_text|linebreaks }}
    <footer>
      <cite>- ELI</cite>
    </footer>
  </blockquote>
  {% else %}
  <p>Error! Could not answer. See 'Details' below.</p>
  {% endif %}

  <dialog>
    <article class="container-fluid">
      <header>
        <button aria-label="Close" rel="prev" onclick="closeDetails(event)"></button>
        <p>Details</p>
      </header>
      <table>
        <tbody>
          <tr><th scope="row">ID</th><td>{{ object.id }}</td></tr>
          <tr>
            <th scope="row">Timestamp</th>
            <td>{{ object.timestamp|date:"r" }}</td>
          </tr>
          <tr><th>Audience Name</th><td>{{ object.audience_name }}</td></tr>
        </tbody>
      </table>
      <h6>Response</h6>
      {{ object.response | to_pretty_json }}      
    </article>
  </dialog>
  
  <footer>
    <div>
    Link: <a class="permalink" href="{{ object.get_absolute_url }}">{{ object.id }}</a>
    </div>
    <button onclick="openDetails(event)">Show Details</button>
  </footer>
</article>
